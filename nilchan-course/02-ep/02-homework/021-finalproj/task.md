---
### Дисклеймер:
- Цель данного учебного проекта — закрепить и отточить пройденный материал из второй части полного курса по Golang: {TODO link}.
- Основной упор в предлагаемом учебном проекте делается на: интерфейсы, конкуретное взаимодействие на Golang, HTTP и REST API. В данный момент мы не рассматриваем лучшие практики организации кода и оптимальную архитектуру бекенд-приложения.
- Поэтому значительная часть лучших практик по огранизации кода не была использована в представленом коде. Первостепенная цель — повторение пройденного материала, а не демонстрация идеального написания Golang кода.
- Просьба учитывать этот дисклеймер в потенциальной критике представленного исходного кода.

---
# Задание на проект

1. Мы разрабатываем игру, в которой будем управлять предприятием "Угольная шахта".
2. Конечная цель игры — купить всё необходимое для продуктивной работы предприятия оборудование, притом за наименьшее время.
3. Для увеличения прибыли и, как следствие, для ускорения покупки необходимого оборудования, предприятие может нанимать себе в штат шахтёров различного класса.
4. Все расчётные операции на предприятии, будь до оплата труда шахтёров, покупка оборудования или выручка предприятием прибыли, осуществляются в условных единицах угля. Если это вам кажется странным, вспомните Fallout с оплатой крышками от бутылок ядер-колы. Уголь в нашей игре — и добываемый шахтёрами материал и разменная монета.
5. Изначально, запуская игру, а вместе с ней предприятие, у предприятия уже имеется пассивный доход, равный 1 уголь в секунду. Этот пассивный доход капает на общий баланс предприятия. Технически это реализуется одной запущенной в фоне горутиной, которая раз в секунду добавляет к потоку прибыли предприятия один уголь.
6. Игрок имеет возможность на накопленные на балансе предприятия средства либо нанимать шахтёров, либо покупать оборудование на предприятия. Оборудование стоит дорого, поэтому сидеть на базовом пассивном доходе, не нанимая шахтёров, и ждать, пока накапают средства на покупку оборудования, можно очень долго, а цель игры — это не просто купить всё оборудование, а сделать это за наименьшее время.
7. К найму доступно 3 класса шахтёров:
    - Маленький шахтёр:
        - Оплата труда: 5 угля
        - Энергии хватит на: 30 добыч угля
        - Получает за одну добычу: 1 уголь
        - Перерыв между добычами: 3 секунды
        - Характеристики с каждой добычей не прогрессируют
    - Нормальный шахтёр:
        - Оплата труда: 50 угля
        - Энергия: хватит на 45 добыч угля
        - Получает угля за одну добычу: 3
        - Перерыв между добычами: 2 секунды
        - Характеристики с каждой добычей не прогрессируют
    - Сильный шахтёр:
        - Оплата труда: 450 угля
        - Энергия: хватит на 60 добыч угля
        - Получает угля за одну добычу: 10
        - Перерыв между добычами: 1 секнда
        - С каждой новой добычей, характеристика "Получает угля за одну добычу" увеличивается на 3 единицы
8. Какого именно шахтёра и в какой момент времени нанимать — решает сам игрок. Каждый шахтёр представляет из себя отдельную горутину, которая раз в обозначенный интервал добывает обозначенное количество угля, и передаёт этот уголь в общий поток прибыли предприятия. После истечения заданного количества энергии, шахтёр завершает своё выполнение.
9. Все работающие шахтёры зависят от конекста предприятия, и предприятие имеет возможность в любой момент завершить работу всех шахтёров, не дожидаясь пока каждый отдельный шахтёр доработает свою очередную добычу.
10. Список оборудования, которое необходимо приобрести на предприятие, чтобы закончить игру:
    - Кирки. Стоимость: 3000 угля
    - Вентиляция в шахту. Стоимость: 15000 угля
    - Вагонетки. Стоимость: 50000 угля
11. Предприятие хранит всю информацию о шахтёрах, а именно:
    - Предприятие хранит информацию о том, какие именно шахтёры в настоящий момент трудятся на предприятии, какой класс каждого из этих шахтёров, сколько энергии у каждого отдельного шахтёра осталось.
    - Предприятие хранит информацию о том, сколько всего шахтёров каждого класса было нанято предприятием за всё время работы игры. Шахтёры, которые когда-то работали на предприятии, но их энергия уже истекла, тоже считаются.
    - Предприятие хранит шахтёров под видом интерфейса. Нужно это для того, чтобы при возможном будущем создании новых видов шахтёров, нам не приходилось менять внутреннюю реализацию предприятия. Предлагаемый вид интерфейса:

    ```go
    // Coal — уголь
    // MinerInfo — информация о шахтёре: количество энергии, класс, и т.д.
    type Miner interface {
     Run(ctx context.Context) <-chan Coal
     Info() MinerInfo
    }
    ```

12. Когда всё оборудование куплено, игрок должен дать предприятию команду к завершению. Если всё прошло успешно, предприятие должно отдаль всю хранимую статискику, в том числе колчество времени, понадобившееся на выполнение целей игры. К тому же, все запущенные шахтёры должны завершиться, запущенный HTTP сервер должен завершиться, после чего завершается и сама игра.
13. Взаимодействие с игрой должно осуществляться по протоколу HTTP:
    - Шахтёры:
        - Можно получить информацию о требуемом размере оплаты труда для каждого класса шахтёров
        - Можно нанять нового
        - Можно получить список всех работающих в данный момент
        - Можно получить список всех работающих в данный момент, отфильтровав по классу
    - Оборудование:
        - Можно получить информацию о стоимости всех видов оборудования
        - Можно купить новое оборудование
        - Можно получать информацию о том, какое оборудование уже приобретено, а какое — нет
    - Предприятие:
        - Можно получить промежуточную информацию (текущий баланс, сколько каких шахтёров было нанято за всё время, и тд, по желанию)
        - Можно отправить запрос на завершение игры
14. Во время проектирования HTTP-контракта сервера игры необходимо, по возможности, пользоваться парадигмой REST API.
15. Задание предполагает большой простор для избираемых путей технической реализации.
